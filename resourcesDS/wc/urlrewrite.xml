<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite 
		PUBLIC "-//tuckey.org//DTD UrlRewrite 2.6//EN"
		"http://www.tuckey.org/res/dtds/urlrewrite2.6.dtd">

<!--
	Configuration file for Data Sutra by Data Mosaic
	http://www.data-mosaic.com/data-sutra/

	Rewriting provided by UrlRewriteFilter
	http://www.tuckey.org/urlrewrite/
-->

<urlrewrite>
	
	<!-- DS WebClient with /ds/ prefix -->
	<rule>
		<name>DS resources</name>
		<note>Pass all datasutra wc resources through untouched</note>
		<from>^/ds/(config|css|external|js)/(.*)$</from>
		<to last="true">/ds/$1/$2</to>
	</rule>
	
	<rule>
		<name>DS favicons</name>
		<note>Regular favicon and iOS icon</note>
		<from>^/(favicon.ico|apple-touch-icon.png|startup.png)$</from>
		<to last="true">/ds/img/$1</to>
	</rule>

	<rule>
		<name>DS no trailing slash</name>
		<note></note>
		<from>^/ds$</from>
		<to last="false">/ds/</to>
	</rule>
	
	<rule>
		<name>DS iPhone/iTouch</name>
		<condition name="user-agent" next="or">^.*iPhone.*$</condition>
		<condition name="user-agent">^.*iPod.*$</condition>
		<from>^/ds/(.*)$</from>
		<to last="true">/ds/index.iphone.html?path=$1</to>
	</rule>
	
	<rule>
		<name>DS iPad</name>
		<condition name="user-agent">^.*iPad.*$</condition>
		<from>^/ds/(.*)$</from>
		<to last="true">/ds/index.ipad.html?path=$1</to>
	</rule>
	
	<rule>
		<name>DS desktop</name>
		<note></note>
		<from>^/ds/(.*)$</from>
		<to last="true">/ds/index.html?path=$1</to>
	</rule>

</urlrewrite>

